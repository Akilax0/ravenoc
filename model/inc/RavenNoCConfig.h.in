/**
 * File              : ravenNoCConfig.h.in
 * Author            : Anderson Ignacio da Silva (aignacio) <anderson@aignacio.com>
 * Date              : 16.03.2020
 * Last Modified Date: 19.04.2020
 * Last Modified By  : Anderson Ignacio da Silva (aignacio) <anderson@aignacio.com>
 */
#ifndef RAVENOCCONFIG_H
#define RAVENOCCONFIG_H

#define PROJECT_NAME		"@PROJECT_NAME@"
#define PROJECT_VER		"@PROJECT_VERSION@"
#define PROJECT_VER_MAJOR	"@PROJECT_VERSION_MAJOR@"
#define PROJECT_VER_MINOR	"@PROJECT_VERSION_MINOR@"
#define PTOJECT_VER_PATCH	"@PROJECT_VERSION_PATCH@"

#define	BASE_FMT_SGN(x)		sc_uint<x>
#define	NOC_SIZE_X		8	// NoC - X dimension
#define	NOC_SIZE_Y		8	// NoC - Y dimension

#define	PKT_MAX_WIDTH_PLD	6 	// 2^PKT_MAX_WIDTH_PLD == Max number payload bytes per packet
#define	NUM_BUF_RT		1	// Number of full pkt buffer inside each router

// Macros computation - DO NOT CHANGE
#define	NUM_NODES_NOC	NOC_SIZE_X*NOC_SIZE_Y

#if NOC_SIZE_X <= 16
	#define	NOC_WIDTH_ADDR_X	4
#elif	NOC_SIZE_X	<=	32
	#define	NOC_WIDTH_ADDR_X	5
#elif	NOC_SIZE_X	<=	64
	#define	NOC_WIDTH_ADDR_X	6
#elif	NOC_SIZE_X	<=	128
	#define	NOC_WIDTH_ADDR_X	7
#elif	NOC_SIZE_X	<=	256
	#define	NOC_WIDTH_ADDR_X	8
#elif	NOC_SIZE_X	<=	512
	#define	NOC_WIDTH_ADDR_X	9
#elif	NOC_SIZE_X	<=	1024
	#define	NOC_WIDTH_ADDR_X	10
#else
	#error	"[NoC-CFG] The NoC X size selected is wider than the max. range!"
#endif

#if NOC_SIZE_Y <= 16
	#define	NOC_WIDTH_ADDR_Y	4
#elif	NOC_SIZE_Y	<=	32
	#define	NOC_WIDTH_ADDR_Y	5
#elif	NOC_SIZE_Y	<=	64
	#define	NOC_WIDTH_ADDR_Y	6
#elif	NOC_SIZE_Y	<=	128
	#define	NOC_WIDTH_ADDR_Y	7
#elif	NOC_SIZE_Y	<=	256
	#define	NOC_WIDTH_ADDR_Y	8
#elif	NOC_SIZE_Y	<=	512
	#define	NOC_WIDTH_ADDR_Y	9
#elif	NOC_SIZE_Y	<=	1024
	#define	NOC_WIDTH_ADDR_Y	10
#else
	#error	"[NoC-CFG] The NoC Y size selected is wider than the max. range!"
#endif

#define PKT_ID_WIDTH				4													// WIDTH: Size of pkt Identification Number
#define	BITS_P_PLD					8													// Each payload element has 8 bits
#define	PKT_MAX_SIZE_PLD		(1 << PKT_MAX_WIDTH_PLD)	// Max number of payload bytes per pkt
#define HEADER_MIN_WIDTH		(PKT_MAX_WIDTH_PLD+PKT_ID_WIDTH+NOC_WIDTH_ADDR_X+NOC_WIDTH_ADDR_Y+BITS_P_PLD)

#if HEADER_MIN_WIDTH < 32
	#define	SMALL_NOC_CFG
	#define	FLIT_WIDTH				32
	#define	TYPE_DATA_IF			uint
	#define	BUF_FIFO_ENTRIES	(PKT_MAX_SIZE_PLD/4)*NUM_BUF_RT
	#if ((PKT_MAX_SIZE_PLD%4)!=0)
		#error	"[NoC-CFG] Max. number of bytes per packet is not multiple of 4 bytes!"
	#endif
#else
	#define	BIG_NOC_CFG
	#define	FLIT_WIDTH				64
	#define	TYPE_DATA_IF			ulong
	#define	BUF_FIFO_ENTRIES	(PKT_MAX_SIZE_PLD/8)*NUM_BUF_RT
	#if ((PKT_MAX_SIZE_PLD%8)!=0)
		#error	"[NoC-CFG] Max. number of bytes per packet is not multiple of 8 bytes!"
	#endif
#endif


#endif
